<div class="d-flex flex-row flex-wrap mb-3 align-items-center list-section">
  <div class="image p-2">
    <img loading="lazy" src="{{media.image.url}}">
  </div>

  <div class="title p-2">{{media.title}}</div>

  {% if media.num_seasons and media.num_seasons != 1 %}
    <div class="score p-2 dropdown">
      <button class="btn btn-dark dropdown-toggle" type="button" data-bs-toggle="dropdown" aria-expanded="false">
        {{media.score}}
      </button>
      <ul class="dropdown-menu">
        {% for season, score in media.seasons_score.items %}
          <li>S{{season}}: {{score}}</li>
        {% endfor %}
      </ul>
    </div>
  {% else %}
    <div class="score p-2">{{media.score}}</div>
  {% endif %}

  <div class="status p-2">{{media.status}}</div>
  
  <div class="edit p-2">
    <button type="button" class="btn open-modal-button" data-bs-toggle="modal" data-bs-target="#modal-{{media.media_type}}_{{media.media_id}}" data-url="{% url 'edit' media_type=media.media_type media_id=media.media_id%}">
      <i class="bi bi-pen-fill"></i>
    </button>
  </div>
  
  <div class="modal fade`" id="modal-{{media.media_type}}_{{media.media_id}}" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-dialog-centered modal-dialog-scrollable modal-lg">
      <div class="modal-content">
        <div class="modal-header">
          <h1  id="modal-title-{{media.media_type}}_{{media.media_id}}" class="modal-title fs-5" id="exampleModalLabel"></h1>
          <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
        </div>
        <div class="modal-body" id="modal-body-{{media.media_type}}_{{media.media_id}}">
          <div class="d-flex justify-content-center">
            <div class="spinner-grow" role="status">
              <span class="visually-hidden">Loading...</span>
            </div>
          </div>
        </div>
        <div class="modal-footer d-flex justify-content-between">
          <form method="post">
            {% csrf_token %}
            <input type="hidden" name="api_origin" value="{{ media.api_origin }}">
            <button class="btn btn-danger modal-delete-btn" type="submit" name="delete" value="{{media.media_id}}">Delete</button>
          </form>
          <button type="submit" form="form-{{media.media_type}}_{{media.media_id}}"class="btn btn-primary">Save changes</button>
        </div>
      </div>
    </div>
  </div>

  <div class="delete p-2">
    <button type="button" class="btn" data-bs-toggle="modal" data-bs-target="#modal-confirmation-{{media.media_type}}_{{media.media_id}}">
      <i class="bi bi-trash3-fill"></i>
    </button>
  </div>

  <div class="modal fade" id="modal-confirmation-{{media.media_type}}_{{media.media_id}}" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-dialog-centered modal-dialog-scrollable .modal-sm">
      <div class="modal-content">
        <div class="modal-header">
          <h5 class="modal-title">Are you sure?</h5>
          <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
        </div>  
        <div class="modal-body d-flex justify-content-evenly">
          <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancel</button>
          <form method="post">
            {% csrf_token %}
            <input type="hidden" name="api_origin" value="{{ media.api_origin }}">
            <button class="btn btn-danger modal-delete-btn" type="submit" name="delete" value="{{media.media_id}}">Delete</button>
          </form>
        </div>
      </div>
    </div>
  </div>

</div>