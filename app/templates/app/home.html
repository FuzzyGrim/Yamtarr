{% load static %}

{% block content %}

<!DOCTYPE html>
<html lang="en">

  <head>
    {% include "app/include/tags.html" %}
    <link rel="stylesheet" type="text/css" href="{% static 'css/main.css' %}">

    <title>Yamtarr</title>
  </head>

  <body id="home">

    {% include "app/include/navbar.html" %}    

    <main>

      {% if messages %}
        {% for message in messages %}
          {% if message.tags == 'error' %}
            <div class="alert alert-danger">
          {% else %}
            <div class="alert alert-{{ message.tags }}">
          {% endif %}
            {{ message }}
          </div>
        {% endfor %}
      {% endif %}

      {% if user.is_authenticated %}
        
        <div class="d-flex align-items-start">

          <div class="nav flex-column nav-pills me-3" id="v-pills-tab" role="tablist" aria-orientation="vertical">
            <button class="nav-link active" id="v-pills-tv-tab" data-bs-toggle="pill" data-bs-target="#v-pills-tv" type="button" role="tab" aria-controls="v-pills-tv" aria-selected="true">
              <span class="left_word">TV LIST</span> 
              <span class="right_number">{{ tv|length }}</span> 
            </button>
            <div class="filters">
              {% for status in tv_status%}
                <button class="nav-link" id="v-pills-tv-{{status}}-tab" data-bs-toggle="pill" data-bs-target="#v-pills-tv-{{status}}" type="button" role="tab" aria-controls="v-pills-tv-{{status}}" aria-selected="true">
                  <span class="left_word">{{status|capfirst}}</span> 
                  {% if status == 'completed' %}
                    <span class="right_number">{{ tv_status.completed|length }}</span>
                  {% elif status == 'planning' %}
                    <span class="right_number">{{ tv_status.planning|length }}</span>
                  {% elif status == 'watching' %}
                    <span class="right_number">{{ tv_status.watching|length }}</span>
                  {% elif status == 'paused' %}
                    <span class="right_number">{{ tv_status.paused|length }}</span>
                  {% elif status == 'dropped' %}
                    <span class="right_number">{{ tv_status.dropped|length }}</span>
                  {% endif %}
                </button>
              {% endfor %}
            </div>
            <button class="nav-link" id="v-pills-movie-tab" data-bs-toggle="pill" data-bs-target="#v-pills-movie" type="button" role="tab" aria-controls="v-pills-movie" aria-selected="false">
              <span class="left_word"><MOVIE>MOVIE LIST</span> 
              <span class="right_number">{{ movies|length }}</span> 
            </button>
            <div class="filters">
              {% for status in movies_status%}
                <button class="nav-link" id="v-pills-movie-{{status}}-tab" data-bs-toggle="pill" data-bs-target="#v-pills-movie-{{status}}" type="button" role="tab" aria-controls="v-pills-movie-{{status}}" aria-selected="true">
                  <span class="left_word">{{status|capfirst}}</span> 
                  {% if status == 'completed' %}
                    <span class="right_number">{{ movies_status.completed|length }}</span>
                  {% elif status == 'planning' %}
                    <span class="right_number">{{ movies_status.planning|length }}</span>
                  {% elif status == 'watching' %}
                    <span class="right_number">{{ movies_status.watching|length }}</span>
                  {% elif status == 'paused' %}
                    <span class="right_number">{{ movies_status.paused|length }}</span>
                  {% elif status == 'dropped' %}
                    <span class="right_number">{{ movies_status.dropped|length }}</span>
                  {% endif %}
                </button>
              {% endfor %}
            </div>
          </div>
      

          <div class="tab-content" id="v-pills-tabContent">
            <div class="tab-pane fade show active" id="v-pills-tv" role="tabpanel" aria-labelledby="v-pills-tv-tab" tabindex="0">
              {% include "app/include/list-head.html" %}
              {% for media in tv %}
                {% include "app/include/list-section.html" %}    
              {% endfor %}
            </div>

            {% for status in tv_status %}
              <div class="tab-pane fade" id="v-pills-tv-{{status}}" role="tabpanel" aria-labelledby="v-pills-tv-{{status}}-tab" tabindex="0">
                {% include "app/include/list-head.html" %}
                {% if status == 'completed'%}
                  {% for media in tv_status.completed %}
                    {% include "app/include/list-section.html" %}
                  {% endfor %}
                {% elif status == 'planning'%}
                  {% for media in tv_status.planning %}
                    {% include "app/include/list-section.html" %}
                  {% endfor %}
                {% elif status == 'watching'%}
                  {% for media in tv_status.watching %}
                    {% include "app/include/list-section.html" %}
                  {% endfor %}
                {% elif status == 'paused'%}
                  {% for media in tv_status.paused %}
                    {% include "app/include/list-section.html" %}
                  {% endfor %}
                {% elif status == 'dropped'%}
                  {% for media in tv_status.dropped %}
                    {% include "app/include/list-section.html" %}
                  {% endfor %}
                {% endif %}
              </div>
            {% endfor %}


            <div class="tab-pane fade" id="v-pills-movie" role="tabpanel" aria-labelledby="v-pills-movie-tab" tabindex="0">
              {% include "app/include/list-head.html" %}
              {% for media in movies %}
                {% include "app/include/list-section.html" %}    
              {% endfor %}
            </div>

            {% for status in movies_status %}
              <div class="tab-pane fade" id="v-pills-movie-{{status}}" role="tabpanel" aria-labelledby="v-pills-movie-{{status}}-tab" tabindex="0">
                {% include "app/include/list-head.html" %}
                {% if status == 'completed'%}
                  {% for media in movies_status.completed %}
                    {% include "app/include/list-section.html" %}
                  {% endfor %}
                {% elif status == 'planning'%}
                  {% for media in movies_status.planning %}
                    {% include "app/include/list-section.html" %}
                  {% endfor %}
                {% elif status == 'watching'%}
                  {% for media in movies_status.watching %}
                    {% include "app/include/list-section.html" %}
                  {% endfor %}
                {% elif status == 'paused'%}
                  {% for media in movies_status.paused %}
                    {% include "app/include/list-section.html" %}
                  {% endfor %}
                {% elif status == 'dropped'%}
                  {% for media in movies_status.dropped %}
                    {% include "app/include/list-section.html" %}
                  {% endfor %}
                {% endif %}
              </div>
            {% endfor %}
          </div>
        </div>
      {% else %}
        
        <h2 class="text-center mt-5">Please log in to see your list</h2>

      {% endif %}
      

    </main>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.0-beta1/dist/js/bootstrap.bundle.min.js" integrity="sha384-pprn3073KE6tl6bjs2QrFaJGz5/SUsLqktiwsUTF55Jfv3qYSDhgCecCxMW52nD2" crossorigin="anonymous"></script>

    </body>

</html>
{% endblock %}